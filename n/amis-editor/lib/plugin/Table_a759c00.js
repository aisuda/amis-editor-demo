amis.define("4e73810",(function(e,a,t,n){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var l=e("849c8c1"),i=e("167c905"),c=e("c2555e3"),b=e("8ba532b"),r=e("8beedab"),d=e("2426036"),o=e("fb32b1a"),f=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return Object.defineProperty(a,"rendererName",{enumerable:!0,configurable:!0,writable:!0,value:"table"}),Object.defineProperty(a,"$schema",{enumerable:!0,configurable:!0,writable:!0,value:"/schemas/TableSchema.json"}),Object.defineProperty(a,"name",{enumerable:!0,configurable:!0,writable:!0,value:o.i18n("b339aa87104709397ba68e7ebbc6e5ba")}),Object.defineProperty(a,"tags",{enumerable:!0,configurable:!0,writable:!0,value:[o.i18n("027446c2f9070b0f5b16a18208bf5fc7")]}),Object.defineProperty(a,"isBaseComponent",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(a,"description",{enumerable:!0,configurable:!0,writable:!0,value:o.i18n("ea2b32f5d78d2305b9b7bc21e056a009")}),Object.defineProperty(a,"docLink",{enumerable:!0,configurable:!0,writable:!0,value:"/amis/zh-CN/components/table"}),Object.defineProperty(a,"icon",{enumerable:!0,configurable:!0,writable:!0,value:"fa fa-table"}),Object.defineProperty(a,"pluginIcon",{enumerable:!0,configurable:!0,writable:!0,value:"table-plugin"}),Object.defineProperty(a,"scaffold",{enumerable:!0,configurable:!0,writable:!0,value:{type:"table",columns:[{label:o.i18n("20aadc3f9b7edb564dc58898898e0dc8"),name:"a"}]}}),Object.defineProperty(a,"regions",{enumerable:!0,configurable:!0,writable:!0,value:[{key:"columns",label:o.i18n("1f9794dd5634220ed0a498c666cf46fe"),renderMethod:"renderTableContent",preferTag:o.i18n("027446c2f9070b0f5b16a18208bf5fc7"),dndMode:"position-h"}]}),Object.defineProperty(a,"previewSchema",{enumerable:!0,configurable:!0,writable:!0,value:{type:"table",className:"text-left m-b-none",affixHeader:!1,items:[{a:1,b:2},{a:3,b:4},{a:5,b:6}],columns:[{label:"A",name:"a"},{label:"B",name:"b"}]}}),Object.defineProperty(a,"panelTitle",{enumerable:!0,configurable:!0,writable:!0,value:o.i18n("b339aa87104709397ba68e7ebbc6e5ba")}),Object.defineProperty(a,"events",{enumerable:!0,configurable:!0,writable:!0,value:[{eventName:"selectedChange",eventLabel:o.i18n("257f5a3886d87d2255206f86b880d07e"),description:o.i18n("6130b1f75d624b2f73f5d923492e92f7"),dataSchema:[{type:"object",properties:{"event.data.selectedItems":{type:"array",title:o.i18n("aeddca0456d8fe520dc95545a83458e9")},"event.data.unSelectedItems":{type:"array",title:o.i18n("4f907cb94921bb62a8399adec922bb60")}}}]},{eventName:"columnSort",eventLabel:o.i18n("f3d21138c8ecf5683503c4f814cc7199"),description:o.i18n("d84464cfb2a5828a200fe9c28a323122"),dataSchema:[{type:"object",properties:{"event.data.orderBy":{type:"string",title:o.i18n("652f155e644e82ebb0a1aed97ab6ab23")},"event.data.orderDir":{type:"string",title:o.i18n("460e3a697d1680445a47139c0816fbe6")}}}]},{eventName:"columnFilter",eventLabel:o.i18n("3d0b957a99d0c366612c01913e17a0c7"),description:o.i18n("b35963687361af98e6acdc004e87fc3c"),dataSchema:[{type:"object",properties:{"event.data.filterName":{type:"string",title:o.i18n("ad11fba3ac676233f3105e76e7de0501")},"event.data.filterValue":{type:"string",title:o.i18n("8e4b9c88c51aaad1a28a28e8b536697f")}}}]},{eventName:"columnSearch",eventLabel:o.i18n("93a5a0253f11e3a2e58f4e87a52fb094"),description:o.i18n("6d4c4990ab2c32efe8a17c5f22e10cb5"),dataSchema:[{type:"object",properties:{"event.data.searchName":{type:"string",title:o.i18n("a80a4486100baf3f45fab3a59e4a816d")},"event.data.searchValue":{type:"object",title:o.i18n("b9a565fe1dc488efae1d63464f277f09")}}}]},{eventName:"orderChange",eventLabel:o.i18n("85ddd38957256b6e9026f42ed570bc35"),description:o.i18n("d7a66def82af88cd5d408e38feb8a65a"),dataSchema:[{type:"object",properties:{"event.data.movedItems":{type:"array",title:o.i18n("1987561c006c7192ab619f81103d2a2f")}}}]},{eventName:"columnToggled",eventLabel:o.i18n("ecfebbc91e2c18a512aeb11b7da15193"),description:o.i18n("c94f45773a42dc386b9c9dcdc6fa542b"),dataSchema:[{type:"object",properties:{"event.data.columns":{type:"array",title:o.i18n("70567329ee851a5ba7e7301bd8e9d9a1")}}}]},{eventName:"rowClick",eventLabel:o.i18n("76e47871d654c3b0b0e301c0a076e55a"),description:o.i18n("cc13521eab2c7423b3fb857772405cc3"),dataSchema:[{type:"object",properties:{"event.data.rowItem":{type:"object",title:o.i18n("2fbbf5c38b66ac5496ac42246bbe9e0b")}}}]}]}),Object.defineProperty(a,"actions",{enumerable:!0,configurable:!0,writable:!0,value:[{actionType:"select",actionLabel:o.i18n("8eb3c8b16106e5487cd1fa3b8a1342ce"),description:o.i18n("908cc16fe4f7972450167e26276ac726"),innerArgs:["selected"],schema:r.getArgsWrapper([{name:"selected",label:o.i18n("a2b39e5a8b5015234dcd8e07a2e00e3d"),type:"ae-formulaControl",variables:"${variables}",size:"lg",mode:"horizontal"}])},{actionType:"selectAll",actionLabel:o.i18n("366a3c07289bd6efb7c2a182f7a12772"),description:o.i18n("e97c09cd119b64ae0a8dfd42a1d449cb")},{actionType:"clearAll",actionLabel:o.i18n("c3e8652924c258e121eed16414d3a9e5"),description:o.i18n("7619ec29c0a854dd49e0a7a47bf1a127")},{actionType:"initDrag",actionLabel:o.i18n("b94bd878cae4ddc567b00a2dc4f21d74"),description:o.i18n("5dc3017c21ae2e31ab127dbde8ec80e9")}]}),Object.defineProperty(a,"panelBodyCreator",{enumerable:!0,configurable:!0,writable:!0,value:function(e){var t="crud"===e.schema.type;return b.getSchemaTpl("tabs",[{title:o.i18n("22b777e6fcb613b8ba83ced9594cd07e"),body:[b.getSchemaTpl("layout:originPosition",{value:"left-top"}),b.getSchemaTpl("title"),t?null:{name:"source",type:"input-text",label:o.i18n("c11322c9cc43ce3c004cf03f5ac0acd0"),pipeIn:b.defaultValue("${items}"),description:o.i18n("7ea26d0cb93e59339daf6a1ac68624f3")},{name:"combineNum",label:o.i18n("25915fb58615ba9a5e145efa252fec30"),type:"input-number",placeholder:o.i18n("d7d0936858fcdf4ffdb2899451ec74fc"),description:o.i18n("80174cabf025dfe269aee5390b813708")},t?null:{type:"divider"}]},{title:o.i18n("afcde2611bdd13c1e65b4fb6a2f13425"),body:[{name:"columnsTogglable",label:o.i18n("14921c3831512876f6d58b2a497b86df"),type:"button-group-select",pipeIn:b.defaultValue("auto"),mode:"inline",className:"w-full",size:"xs",options:[{label:o.i18n("3aed2c11e95a9c0ea1d853d4aee72e8c"),value:"auto"},{label:o.i18n("cc42dd3170fdf36bdc2b0f58ab23eb84"),value:!0},{label:o.i18n("b15d91274e9fc68608c609999e0413fa"),value:!1}],description:o.i18n("6fe0b71c07a5ce5f7a09f7fdb1d63827")},b.getSchemaTpl("switch",{name:"affixHeader",label:o.i18n("2206c0e11aa5f4f154aa9e5dfffcb474"),pipeIn:b.defaultValue(!0)}),b.getSchemaTpl("switch",{name:"showHeader",label:o.i18n("e18d033cc4baab3ebb329f6b29eb3cef"),pipeIn:b.defaultValue(!0)}),b.getSchemaTpl("switch",{name:"showFooter",label:o.i18n("412593f58b9d062a43cbe2ce38f4dc65"),pipeIn:b.defaultValue(!0)}),b.getSchemaTpl("switch",{name:"footable",label:o.i18n("5006fdc5659989e42c3855c17c57f878"),description:o.i18n("9db359f376a1a588ef7dcbef53cc114a"),pipeIn:function(e){return!!e}}),{name:"footable.expand",type:"button-group-select",size:"xs",visibleOn:"data.footable",label:o.i18n("df74194830e695efbfce16c0c64223cf"),pipeIn:b.defaultValue("none"),mode:"inline",className:"w-full",options:[{label:o.i18n("94be543c4fd399f0839211464c8583ce"),value:"first"},{label:o.i18n("9a7b52fc8659f1786907fe93efa85bf7"),value:"all"},{label:o.i18n("b07deca9076bd3354b1b2709d58d725a"),value:"none"}]},b.getSchemaTpl("tablePlaceholder"),{name:"rowClassNameExpr",type:"input-text",label:o.i18n("76b3250fb1e8593fac075b64029300fa"),placeholder:"支持模板语法，如 <%= data.id % 2 ? 'bg-success' : '' %>"},b.getSchemaTpl("className",{label:o.i18n("734ebf8b33422c456e937fc27c9a16ce")}),b.getSchemaTpl("className",{name:"tableClassName",label:o.i18n("320f489db3dade075d69f155b346f98b")}),b.getSchemaTpl("className",{name:"headerClassName",label:o.i18n("08ca0d502abc4336855d837f281caef4")}),b.getSchemaTpl("className",{name:"footerClassName",label:o.i18n("b6469055adf2b7bfb187f74ae17dfe54")}),b.getSchemaTpl("className",{name:"toolbarClassName",label:o.i18n("39ff38577b97cf98fc130f9bd596d4c4")})]},{title:o.i18n("33bf801796fd255b5f6147e33146669b"),body:[b.getSchemaTpl("ref"),b.getSchemaTpl("visible")]},t?null:{title:o.i18n("10b2761db5a8e089049df39675abc550"),className:"p-none",body:[b.getSchemaTpl("eventControl",l.__assign({name:"onEvent"},r.getEventControlConfig(a.manager,e)))]}])}}),a}return l.__extends(a,e),Object.defineProperty(a.prototype,"scaffoldForm",{get:function(){var e=d.getEnv(window.editorStore).i18nEnabled;return{title:o.i18n("6b93fcfc1a5795189c6072fa6e86d4f6"),body:[{name:"columns",type:"combo",multiple:!0,label:!1,addButtonText:o.i18n("0c14e431f1b5ecd163f8fa010a0654c7"),draggable:!0,items:[{type:e?"input-text-i18n":"input-text",name:"label",placeholder:o.i18n("32c65d8d7431e76029678ec7bb73a5ab")},{type:"input-text",name:"name",placeholder:o.i18n("41a344642681efaaa418c228ba7fb45c")},{type:"select",name:"type",placeholder:o.i18n("226b0912184333c81babf2f1894ec0c1"),value:"text",options:[{value:"text",label:o.i18n("ffb01e5bcf4c00447f5150d3cba81371")},{value:"tpl",label:o.i18n("59cf15fe6b8d659c9bd2f86143534a06")},{value:"image",label:o.i18n("20def7942674282277c3714ed7ea6ce0")},{value:"date",label:o.i18n("4ff1e74e43a3586339251494117185ad")},{value:"progress",label:o.i18n("c7bff79d059a0b7ff9b02441959d8be2")},{value:"status",label:o.i18n("3fea7ca76cdece641436d7ab0d02ab1b")},{value:"mapping",label:o.i18n("9da188491dd34c4382a5b9f006194e41")},{value:"operation",label:o.i18n("8abc564260a1564521e0c3a1d5419b4a")}]}]}],canRebuild:!0}},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"filterProps",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var a=Array.isArray(e.value)?e.value:"string"==typeof e.source?i.resolveVariable(e.source,e.data):i.resolveVariable("items",e.data);if(Array.isArray(a)&&a.length)e.value=a.slice(0,10);else{var t={};Array.isArray(e.columns)&&e.columns.forEach((function(e){e.name&&c.setVariable(t,e.name,b.mockValue(e))})),e.value=b.repeatArray(t,1).map((function(e,a){return l.__assign(l.__assign({},e),{id:a+1})}))}return e.resizable=!1,e}}),Object.defineProperty(a.prototype,"getRendererInfo",{enumerable:!1,configurable:!0,writable:!0,value:function(a){var t,n=this,i=a.schema,c=a.renderer;return i.$$id||"crud"!==(null===(t=i.$$editor)||void 0===t?void 0:t.renderer.name)||"table"!==c.name?e.prototype.getRendererInfo.call(this,a):l.__assign(l.__assign({},{id:i.$$editor.id}),{name:n.name,regions:n.regions,patchContainers:n.patchContainers,vRendererConfig:n.vRendererConfig,wrapperProps:n.wrapperProps,wrapperResolve:n.wrapperResolve,filterProps:n.filterProps,$schema:n.$schema,renderRenderer:n.renderRenderer})}}),Object.defineProperty(a.prototype,"beforeInsert",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var a,t,n,i,c=e.context;c.info.plugin!==this&&(null===(a=c.node.sameIdChild)||void 0===a?void 0:a.info.plugin)!==this||"columns"!==c.region||(c.data=l.__assign(l.__assign({},c.data),{label:null!==(i=null!==(t=c.data.label)&&void 0!==t?t:null===(n=c.subRenderer)||void 0===n?void 0:n.name)&&void 0!==i?i:o.i18n("bcee820bc20342a4d388a35ed32a35fe")}))}}),Object.defineProperty(a.prototype,"buildDataSchemas",{enumerable:!1,configurable:!0,writable:!0,value:function(e,a,t){var n,i;return l.__awaiter(this,void 0,void 0,(function(){var b,r,d,f,s,p,u,m,v,g;return l.__generator(this,(function(y){switch(y.label){case 0:b={$id:"tableRow",type:"object",properties:{}},r=e.children.find((function(e){return e.isRegion&&"columns"===e.region})),d=0,f=null==r?void 0:r.children,y.label=1;case 1:return d<f.length?(s=f[d],(p=s.schema).name?(u=b.properties,m=p.name,(null===(i=null===(n=s.info)||void 0===n?void 0:n.plugin)||void 0===i?void 0:i.buildDataSchemas)?[4,s.info.plugin.buildDataSchemas(s,a)]:[3,3]):[3,5]):[3,6];case 2:return v=y.sent(),[3,4];case 3:v={type:"string",title:p.label||p.name,description:p.description},y.label=4;case 4:u[m]=v,y.label=5;case 5:return d++,[3,1];case 6:return"columns"===(null==a?void 0:a.region)?[2,b]:(g={},t&&c.someTree(null==r?void 0:r.children,(function(e){return e.id===t.id}))&&(g=b.properties),[2,{$id:"table",type:"object",properties:l.__assign(l.__assign({},g),{rows:{type:"array",title:o.i18n("77fdd35933c099cdcb64b71f3fbe7a6c"),items:b}})}])}}))}))}}),a}(b.BasePlugin);b.registerEditorPlugin(f),a.TablePlugin=f}));